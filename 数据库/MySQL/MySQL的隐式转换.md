# MySQL的隐式转换

### 什么是隐式转换

当操作符（>,=...）与不同类型的操作数一起使用时，会发生类型转换以使操作数兼容

### 转换规则

- 两个参数至少有一个是 NULL 时，比较的结果也是 NULL，例外是使用 <=> 对两个 NULL 做比较时会返回 1，这两种情况都不需要做类型转换
- 两个参数都是字符串，会按照字符串来比较，不做类型转换
- 两个参数都是整数，按照整数来比较，不做类型转换
- 十六进制的值和非数字做比较时，会被当做二进制串
- 有一个参数是 TIMESTAMP 或 DATETIME，并且另外一个参数是常量，常量会被转换为 timestamp
- 有一个参数是 decimal 类型，如果另外一个参数是 decimal 或者整数，会将整数转换为 decimal 后进行比较，如果另外一个参数是浮点数，则会把 decimal 转换为浮点数进行比较
- 所有其他情况下，两个参数都会被转换为浮点数再进行比较

### 避免隐式转换

* 应该避免隐式转换，隐式转换类型主要有字段类型不一致、in 参数包含多个类型，字符集类型不一致等。
* 隐式转换可能导致索引失效，**甚至会导致查询结果不准确**。

> - 如果字符串的第一个字符就是非数字的字符，那么转换为数字就是0
> - 如果字符串以数字开头
>   - 如果字符串中都是数字，那么转换为数字就是整个字符串对应的数字
>   - 如果字符串中存在非数字，那么转换为的数字就是开头的那些数字对应的值
